import{b as Et,r as O,e as v,d as W,c as p,a as s,f as o,u as a,g as x,F as vt,h as _t,o as u,t as K,n as Tt,i as U,j as $t,k as f,w as k,v as B,E as h,l as bt}from"./index-30c5d73e.js";import{u as L}from"./colors-3071c8f1.js";import{c as ut,f as kt,_ as xt,a as E,u as ft,b as Bt,d as Ot,e as F,g as wt,h as St,i as Jt,j as Dt}from"./NameButtonList.vue_vue_type_script_setup_true_lang-efedef5e.js";import{a as Ft,b as It,u as Rt,c as I,d as Vt,e as Ut,f as Wt,_ as Kt}from"./AlertsComponent.vue_vue_type_script_setup_true_lang-b4e509bb.js";import{a as mt,_ as pt}from"./DialogShowButtonCol.vue_vue_type_script_setup_true_lang-e0a1e583.js";const At=()=>({TextColor:yt(),OutlineColor:yt(),OutlineWidth:0}),yt=()=>({Type:"named",Name:"Black",Rgb:"#000000"}),ht=()=>({Enable:!1,Id:-1,Name:"",Kana:"",Engines:[],Aliases:[],AliasText:"",JimakuAttr:At(),ActorNameAttr:At(),ExtData:{}}),Lt=()=>({Id:-1,Name:"",Kana:"",Engines:[],AnotherNames:[],JimakuTextColor:"",JimakuOutlineColor:"",JimakuOutlineWidth:0,ActorTextColor:"",ActorOutlineColor:"",ActorOutlineWidth:0,ExtData:{}}),Ct=()=>({Index:-1,Body:Lt()}),gt=L(),jt=Et("actor",()=>{const _=O([]),d=O([]),c=O(Ct()),t=O(ht()),g=e=>{_.value=e},C=e=>{d.value=e},m=e=>d.value.findIndex(i=>i.Id===e),A=e=>{d.value.push(e)},y=(e,i)=>{d.value[e].Id=i.Id,d.value[e].Name=i.Name},N=(e,i)=>{y(m(e),i)},w=e=>{d.value.splice(e,1)},j=e=>{w(m(e))},q=(e,i)=>{c.value={Index:e,Body:i}},M=()=>{c.value=Ct()},G=e=>{c.value.Body=e},H=()=>t.value.AliasText.split(`
`).map(e=>e.trim()).filter(e=>e.length!=0),P=()=>{c.value.Body={Id:t.value.Id,Name:t.value.Name,Kana:t.value.Kana,Engines:t.value.Engines,AnotherNames:H(),JimakuTextColor:$(t.value.JimakuAttr.TextColor),JimakuOutlineColor:$(t.value.JimakuAttr.OutlineColor),JimakuOutlineWidth:Number(t.value.JimakuAttr.OutlineWidth),ActorTextColor:$(t.value.ActorNameAttr.TextColor),ActorOutlineColor:$(t.value.ActorNameAttr.OutlineColor),ActorOutlineWidth:Number(t.value.ActorNameAttr.OutlineWidth),ExtData:ut(t.value.ExtData)}},z=v(()=>c.value.Index!==-1),Q=v(()=>`「${c.value.Body.Name}」`),X=e=>{t.value=e},Y=()=>{t.value=ht(),t.value.Enable=!0},S=()=>{t.value.Id=c.value.Body.Id,t.value.Name=c.value.Body.Name,t.value.Kana=c.value.Body.Kana,t.value.Engines=c.value.Body.Engines,t.value.Aliases=c.value.Body.AnotherNames,t.value.AliasText=t.value.Aliases.join(`
`),T(t.value.JimakuAttr.TextColor,c.value.Body.JimakuTextColor),T(t.value.JimakuAttr.OutlineColor,c.value.Body.JimakuOutlineColor),t.value.JimakuAttr.OutlineWidth=c.value.Body.JimakuOutlineWidth,T(t.value.ActorNameAttr.TextColor,c.value.Body.ActorTextColor),T(t.value.ActorNameAttr.OutlineColor,c.value.Body.ActorOutlineColor),t.value.ActorNameAttr.OutlineWidth=c.value.Body.ActorOutlineWidth,t.value.ExtData=ut(c.value.Body.ExtData),t.value.Enable=!0},Z=(e,i)=>{const D=ut(t.value.ExtData);D[e]=i,t.value.ExtData=D},tt=e=>{const i=t.value;i.ExtData=kt(i.ExtData,e),t.value=i},et=()=>{t.value.Enable=!0},ot=()=>{t.value.Enable=!1},lt=v(()=>t.value.Enable),at=v(()=>t.value.Id===-1),nt=v(()=>t.value.Id!==-1),st=v(()=>t.value.Name),it=v(()=>`「${t.value.Name}」`),ct=e=>e[0]=="#"?e:gt.dict[e].Hex,rt=e=>e[0]=="#"?"rgb":"named",dt=(e,i)=>{e.Type=i},J=e=>e[0]=="#"?e:gt.dict[e].Hex,T=(e,i)=>{e.Type=rt(i),e.Name=i,e.Rgb=J(i)},$=e=>e.Type==="named"?e.Name:e.Rgb,b=(e,i)=>{e.Name=i,e.Rgb=J(e.Name)},l=(e,i)=>{e.Rgb=i},n=(e,i)=>{i.Type=e.Type,i.Name=e.Name,i.Rgb=e.Rgb};return{specs:_,names:d,detail:c,edit:t,setSpecs:g,setNames:C,getNamesIndex:m,appendName:A,updateName:y,updateNameById:N,deleteName:w,deleteNameById:j,setDetail:q,resetDetail:M,applyDetailBody:G,applyDetailFromEdit:P,visibleDetail:z,titleByDetail:Q,setEdit:X,newEdit:Y,applyEditFromDetail:S,addExtData:Z,removeExtData:tt,editEnable:et,editDisable:ot,visibleEdit:lt,isAdd:at,isUpdate:nt,modalInfoByEdit:st,titleByEdit:it,strToColor:ct,selectChangedColor:b,selectRgb:l,copyEditTextInfo:(e,i)=>{n(e.TextColor,i.TextColor),n(e.OutlineColor,i.OutlineColor),i.OutlineWidth=e.OutlineWidth},setColorType:dt}}),qt={class:"row"},Mt={class:"col"},Gt={key:0},Nt=W({__name:"ListDetailRow",props:{title:{type:String,required:!0},list:{type:Array,required:!0}},setup(_){const d=_,c=v(()=>d.list.length>0);return(t,g)=>(u(),p("div",qt,[s(xt,{title:d.title},null,8,["title"]),o("div",Mt,[a(c)?x("",!0):(u(),p("span",Gt,"なし")),o("ul",null,[(u(!0),p(vt,null,_t(d.list,(C,m)=>(u(),p("li",{key:m},K(C),1))),128))])])]))}}),Ht={class:"row"},Pt={class:"col"},R=W({__name:"ColorAttrRow",props:{title:String,color:String},setup(_){const d=_,c=L();return(t,g)=>(u(),p("div",Ht,[s(xt,{title:d.title},null,8,["title"]),o("div",Pt,[o("span",{style:Tt({color:a(c).strToColor(d.color)})},"■",4),U(" "+K(d.color),1)])]))}}),zt={class:"row"},Qt={class:"col-4"},Xt={class:"input-group"},Yt={class:"container"},Zt={class:"row"},te={class:"col-3"},ee=["value","checked"],oe={class:"col"},le=["value"],ae={class:"row"},ne={class:"col-3"},se=["value","checked"],ie={class:"col"},ce=["value"],V=W({__name:"InputColorRow",props:{title:{type:String,required:!0},name:{type:String,required:!0},modelValue:{type:Object,required:!0},updateNameFunc:{type:Function,required:!0},updateRgbFunc:{type:Function,required:!0},changeCheckFunc:{type:Function,required:!0}},setup(_){const d=_,c=L(),t=m=>m==="named",g=m=>m==="rgb",C=v(()=>c.names);return(m,A)=>(u(),p("div",zt,[s(E,{title:d.title},null,8,["title"]),o("div",Qt,[o("form",null,[o("div",Xt,[o("div",Yt,[o("div",Zt,[o("div",te,[o("input",{type:"radio",name:"{{ props.name }}",value:d.modelValue.Type,checked:t(d.modelValue.Type),onChange:A[0]||(A[0]=y=>_.changeCheckFunc(y.target))},null,40,ee),U(" 名前 ")]),o("div",oe,[o("select",{value:_.modelValue.Name,onChange:A[1]||(A[1]=y=>_.updateNameFunc(y.target))},[(u(!0),p(vt,null,_t(a(C),(y,N)=>(u(),p("option",{key:N},K(y),1))),128))],40,le)])]),o("div",ae,[o("div",ne,[o("input",{type:"radio",name:"{{ props.name }}",value:d.modelValue.Type,checked:g(d.modelValue.Type),onChange:A[2]||(A[2]=y=>_.changeCheckFunc(y.target))},null,40,se),U(" RGB ")]),o("div",ie,[o("input",{type:"color",class:"form-control form-control-color",value:d.modelValue.Rgb,onChange:A[3]||(A[3]=y=>_.updateRgbFunc(y.target))},null,40,ce)])])])])])])]))}}),re={class:"container main-view"},de={key:0,id:"loading",class:"d-flex align-items-center"},ue=o("div",{class:"spinner",variant:"primary"},null,-1),me=[ue],pe={key:1,class:"container"},ve={key:2,class:"row"},_e={class:"container"},Ae={class:"row"},ye={class:"col"},he={class:"col"},Ce={class:"row"},ge={class:"col"},Ne={class:"col"},xe={class:"row"},Ee={class:"col"},Te=["id","value"],$e={class:"row"},be={class:"col"},ke=o("ul",null,[o("li",null,"別名を1行ずつ記載"),o("li",null,'特定のエンジン名は後ろに"[エンジン名]"を入れる'),o("li",null,"空行・空白のみの行は無視"),o("li",null,"行の両端の空白は無視")],-1),fe={class:"row"},Be={class:"col"},Oe={class:"col"},we={class:"row"},Se=o("div",{class:"col-4"}," ",-1),Je={class:"col-1"},De=o("i",{class:"bi-arrow-down-circle"},null,-1),Fe=[De],Ie=o("div",{class:"col-1"}," ",-1),Re={class:"col-1"},Ve=o("i",{class:"bi-arrow-up-circle"},null,-1),Ue=[Ve],We=o("div",{class:"col"}," ",-1),Ke={class:"row"},Le={class:"col"},je={class:"col"},qe={class:"row"},Me={key:3,class:"row"},Ge={key:0,class:"row"},He={class:"col-4 full_height"},Pe={class:"col"},ze={class:"container"},Qe={class:"row half_height"},Xe={key:0,class:"d-flex detail_box"},Ye=o("p",null,"選択がされていません",-1),Ze=[Ye],to={key:1,class:"d-flex detail_box"},eo={class:"container"},io=W({__name:"ActorMasterView",setup(_){const d=Ft(),c=It(),t=jt(),g=ft(),C=L(),m=Rt(),A=O(!1),y=l=>{d.clear(),c.clear();const n=`${m.apiBaseURL}/api/v1/ActorSpec/${l}/`;I(n,null,"声優詳細取得エラー",r=>{t.setDetail(l,r.data.Spec)})},N=()=>{t.editDisable(),t.resetDetail()},w=()=>{t.newEdit()},j=(l,n)=>{t.addExtData(l,n)},q=l=>{t.removeExtData(l)},M=()=>{t.applyDetailFromEdit();const l=t.titleByEdit,n=`${m.apiBaseURL}/api/v1/ActorSpec/`;Vt(n,t.detail.Body,`${l}の追加に成功しました`,`${l}の追加エラー`,r=>{console.log(`returns ${r.status}`),t.appendName({Id:r.data.NewId,Name:t.detail.Body.Name}),N()})},G=()=>{t.applyDetailFromEdit();const l=t.detail.Body.Id,n=t.detail.Body.Name,r=t.titleByEdit,e=`${m.apiBaseURL}/api/v1/ActorSpec/${l}`;Ut(e,t.detail.Body,`${r}の更新に成功しました`,`${r}の更新エラー`,i=>{console.log(`returns ${i.status}`),t.updateNameById(l,{Id:l,Name:n}),N()})},H=()=>{const l=t.detail.Body.Id,n=t.titleByEdit,r=`${m.apiBaseURL}/api/v1/ActorSpec/${l}`;Wt(r,`${n}の削除に成功しました`,`${n}の削除エラー`,e=>{console.log(`returns ${e.status}`),t.deleteNameById(l),N()})},P=()=>{t.applyEditFromDetail(),t.editEnable()},z=()=>{t.editDisable()},Q=v(()=>t.visibleEdit),X=v(()=>t.visibleDetail),Y=v(()=>t.isAdd),S=v(()=>t.isUpdate),Z=v(()=>`${t.titleByEdit} を追加します。よろしいですか？`),tt=v(()=>`${t.titleByDetail} を更新します。よろしいですか？`),et=v(()=>`${t.titleByDetail} を削除します。よろしいですか？`),ot=l=>{console.log(`[JT:colorName]${l.value}`),t.selectChangedColor(t.edit.JimakuAttr.TextColor,l.value)},lt=l=>{console.log(`[JT:rgb]${l.value}`),t.selectRgb(t.edit.JimakuAttr.TextColor,l.value)},at=l=>{console.log(`[JO:colorName]${l.value}`),t.selectChangedColor(t.edit.JimakuAttr.OutlineColor,l.value)},nt=l=>{console.log(`[JO:rgb]${l.value}`),console.log(l.value),t.selectRgb(t.edit.JimakuAttr.OutlineColor,l.value)},st=l=>{console.log(`[AT:colorName]${l.value}`),t.selectChangedColor(t.edit.ActorNameAttr.TextColor,l.value)},it=l=>{console.log(`[AT:rgb]${l.value}`),t.selectRgb(t.edit.ActorNameAttr.TextColor,l.value)},ct=l=>{console.log(`[AO:colorName]${l.value}`),t.selectChangedColor(t.edit.ActorNameAttr.OutlineColor,l.value)},rt=l=>{console.log(`[AO:rgb]${l.value}`),t.selectRgb(t.edit.ActorNameAttr.OutlineColor,l.value)},dt=l=>{const n=b(l.value);console.log(`[JT:colorType]${l.value}->${n}`),t.setColorType(t.edit.JimakuAttr.TextColor,n)},J=l=>{const n=b(l.value);console.log(`[JO:colorType]${l.value}->${n}`),t.setColorType(t.edit.JimakuAttr.OutlineColor,n)},T=l=>{const n=b(l.value);console.log(`[AT:colorType]${l.value}->${n}`),t.setColorType(t.edit.ActorNameAttr.TextColor,n)},$=l=>{const n=b(l.value);console.log(`[AO:colorType]${l.value}->${n}`),t.setColorType(t.edit.ActorNameAttr.OutlineColor,n)},b=l=>l==="named"?"rgb":"named";return $t(()=>{A.value=!1;const l=`${m.apiBaseURL}/api/v1/ActorSpec/Index/`;I(l,null,"声優名一覧取得エラー",n=>{t.setNames(n.data.Names);const r=`${m.apiBaseURL}/api/v1/VoiceEngineSpec/`;I(r,null,"音声合成エンジン名一覧取得エラー",e=>{g.setSpecs(e.data.Specs);const i=`${m.apiBaseURL}/api/v1/ColorSpec/All/`;I(i,null,"色情報取得エラー",D=>{C.setSpecs(D.data.Specs),C.setColorNames(),C.setNameToColor(),A.value=!0})})})}),(l,n)=>(u(),p("div",re,[s(Kt),A.value?(u(),p("div",pe,[a(t).visibleEdit?x("",!0):(u(),f(Dt,{key:0,showFunc:w})),a(t).visibleEdit?x("",!0):(u(),f(h,{key:1})),a(t).visibleEdit?(u(),p("div",ve,[o("div",_e,[o("div",Ae,[s(E,{title:"名前"}),o("div",ye,[o("div",he,[k(o("input",{"onUpdate:modelValue":n[0]||(n[0]=r=>a(t).edit.Name=r),class:"form-control",placeholder:"名前"},null,512),[[B,a(t).edit.Name]])])])]),s(h),o("div",Ce,[s(E,{title:"かな"}),o("div",ge,[o("div",Ne,[k(o("input",{"onUpdate:modelValue":n[1]||(n[1]=r=>a(t).edit.Kana=r),class:"form-control",placeholder:"かな"},null,512),[[B,a(t).edit.Kana]])])])]),s(h),o("div",xe,[s(E,{title:"対応音声合成エンジン"}),o("div",Ee,[(u(!0),p(vt,null,_t(a(g).options,(r,e)=>(u(),p("div",{key:e,class:"input-group"},[k(o("input",{id:"ve_"+e,type:"checkbox",value:r,"onUpdate:modelValue":n[2]||(n[2]=i=>a(t).edit.Engines=i)},null,8,Te),[[bt,a(t).edit.Engines]]),U("  "+K(r),1)]))),128))])]),s(h),o("div",$e,[s(E,{title:"別名"}),o("div",be,[k(o("textarea",{"onUpdate:modelValue":n[3]||(n[3]=r=>a(t).edit.AliasText=r),class:"form-control",id:"actorEditAliases"},null,512),[[B,a(t).edit.AliasText]]),ke])]),s(h),s(V,{title:"字幕文字色",modelValue:a(t).edit.JimakuAttr.TextColor,name:"jimaku-text-color-type",updateNameFunc:ot,updateRgbFunc:lt,changeCheckFunc:dt},null,8,["modelValue"]),s(h),s(V,{title:"字幕枠色",modelValue:a(t).edit.JimakuAttr.OutlineColor,name:"jimaku-outline-color-type",updateNameFunc:at,updateRgbFunc:nt,changeCheckFunc:J},null,8,["modelValue"]),s(h),o("div",fe,[s(E,{title:"字幕枠幅"}),o("div",Be,[o("div",Oe,[k(o("input",{"onUpdate:modelValue":n[4]||(n[4]=r=>a(t).edit.JimakuAttr.OutlineWidth=r),type:"number",class:"form-control",placeholder:"字幕枠幅"},null,512),[[B,a(t).edit.JimakuAttr.OutlineWidth]])])])]),s(h),o("div",we,[Se,o("div",Je,[o("button",{onClick:n[5]||(n[5]=r=>a(t).copyEditTextInfo(a(t).edit.JimakuAttr,a(t).edit.ActorNameAttr)),type:"button",class:"btn btn-info"},Fe)]),Ie,o("div",Re,[o("button",{onClick:n[6]||(n[6]=r=>a(t).copyEditTextInfo(a(t).edit.ActorNameAttr,a(t).edit.JimakuAttr)),type:"button",class:"btn btn-info"},Ue)]),We]),s(h),s(V,{title:"声優名文字色",modelValue:a(t).edit.ActorNameAttr.TextColor,name:"actor-name-text-color-type",updateNameFunc:st,updateRgbFunc:it,changeCheckFunc:T},null,8,["modelValue"]),s(h),s(V,{title:"声優名枠色",modelValue:a(t).edit.ActorNameAttr.OutlineColor,name:"actor-name-outline-color-type",updateNameFunc:ct,updateRgbFunc:rt,changeCheckFunc:$},null,8,["modelValue"]),s(h),o("div",Ke,[s(E,{title:"声優名枠幅"}),o("div",Le,[o("div",je,[k(o("input",{"onUpdate:modelValue":n[7]||(n[7]=r=>a(t).edit.ActorNameAttr.OutlineWidth=r),type:"number",class:"form-control",placeholder:"声優名枠幅"},null,512),[[B,a(t).edit.ActorNameAttr.OutlineWidth]])])])]),s(h),s(Bt,{ext:a(t).edit.ExtData,addFunc:j,removeFunc:q},null,8,["ext"]),s(h),o("div",qe,[a(Y)?(u(),f(pt,{key:0,id:"confirm-add-actor",title:"登録",variant:"danger"})):x("",!0),a(S)?(u(),f(pt,{key:1,id:"confirm-update-actor",title:"追加",variant:"warning"})):x("",!0),a(S)?(u(),f(pt,{key:2,id:"confirm-update-actor",title:"更新",variant:"danger"})):x("",!0),s(St,{cancelFunc:z})])])])):(u(),p("div",Me,[a(Q)?x("",!0):(u(),p("div",Ge,[o("div",He,[s(Ot,{names:a(t).names,showFunc:y},null,8,["names"])]),o("div",Pe,[o("div",ze,[o("div",Qe,[a(X)?(u(),p("div",to,[o("div",eo,[s(F,{title:"名前",value:a(t).detail.Body.Name},null,8,["value"]),s(F,{title:"かな",value:a(t).detail.Body.Kana},null,8,["value"]),s(Nt,{title:"対応音声合成エンジン",list:a(t).detail.Body.Engines},null,8,["list"]),s(Nt,{title:"別名",list:a(t).detail.Body.AnotherNames},null,8,["list"]),s(R,{title:"字幕文字色",color:a(t).detail.Body.JimakuTextColor},null,8,["color"]),s(R,{title:"字幕枠色",color:a(t).detail.Body.JimakuOutlineColor},null,8,["color"]),s(F,{title:"字幕枠幅",value:a(t).detail.Body.JimakuOutlineWidth.toString()},null,8,["value"]),s(R,{title:"声優名文字色",color:a(t).detail.Body.ActorTextColor},null,8,["color"]),s(R,{title:"声優名枠色",color:a(t).detail.Body.ActorOutlineColor},null,8,["color"]),s(F,{title:"声優名枠幅",value:a(t).detail.Body.ActorOutlineWidth.toString()},null,8,["value"]),s(wt,{ext:a(t).detail.Body.ExtData},null,8,["ext"]),s(Jt,{editFunc:P,deleteModalId:"confirm-delete-actor"})])])):(u(),p("div",Xe,Ze))])])])]))]))])):(u(),p("div",de,me)),s(mt,{id:"confirm-add-actor",title:"声優情報追加の確認",notice:a(Z),okFunc:M},null,8,["notice"]),s(mt,{id:"confirm-update-actor",title:"声優情報更新の確認",notice:a(tt),okFunc:G},null,8,["notice"]),s(mt,{id:"confirm-delete-actor",title:"声優情報削除の確認",notice:a(et),okFunc:H},null,8,["notice"])]))}});export{io as default};
