import{e as fe,r as w,f as u,d as L,c as d,a as n,b as o,u as s,g as T,F as K,h as P,o as r,t as S,n as Ee,i as ke,j as be,k as R,w as E,v as B,l as Te,m as xe}from"./index-8cce3018.js";import{u as j}from"./colors-6f5a53f9.js";import{c as me,f as Be,_ as Ne,a as N,u as Oe,b as we,d as Se,e as O,g as Ie,h as Je,i as De,j as Fe}from"./NameButtonList.vue_vue_type_script_setup_true_lang-3eb128e0.js";import{a as Re,b as Ve,u as Ue,c as V,d as We,e as Ke,f as Pe,_ as Le}from"./AlertsComponent.vue_vue_type_script_setup_true_lang-6deb986c.js";import{a as pe,_ as ve}from"./DialogShowButtonCol.vue_vue_type_script_setup_true_lang-58cdecf2.js";const _e=()=>({TextColor:ye(),OutlineColor:ye(),OutlineWidth:0}),ye=()=>({Type:"named",Name:"Black",Rgb:"#000000"}),he=()=>({Enable:!1,Id:-1,Name:"",Kana:"",Engines:[],PrimaryEngine:"AIV",Aliases:[],AliasText:"",JimakuAttr:_e(),ActorNameAttr:_e(),ExtData:{}}),je=()=>({Id:-1,Name:"",Kana:"",Engines:[],PrimaryEngine:"AIV",AnotherNames:[],JimakuTextColor:"",JimakuOutlineColor:"",JimakuOutlineWidth:0,ActorTextColor:"",ActorOutlineColor:"",ActorOutlineWidth:0,ExtData:{}}),Ae=()=>({Index:-1,Body:je()}),ge=j(),qe=fe("actor",()=>{const v=w([]),c=w([]),i=w(Ae()),e=w(he()),h=t=>{v.value=t},A=t=>{c.value=t},m=t=>c.value.findIndex(a=>a.Id===t),C=t=>{c.value.push(t)},g=(t,a)=>{c.value[t].Id=a.Id,c.value[t].Name=a.Name},_=(t,a)=>{g(m(t),a)},y=t=>{c.value.splice(t,1)},x=t=>{y(m(t))},q=(t,a)=>{i.value={Index:t,Body:a}},M=()=>{i.value=Ae()},G=t=>{i.value.Body=t},H=()=>e.value.AliasText.split(`
`).map(t=>t.trim()).filter(t=>t.length!=0),z=()=>{i.value.Body={Id:e.value.Id,Name:e.value.Name,Kana:e.value.Kana,Engines:e.value.Engines,PrimaryEngine:e.value.PrimaryEngine,AnotherNames:H(),JimakuTextColor:b(e.value.JimakuAttr.TextColor),JimakuOutlineColor:b(e.value.JimakuAttr.OutlineColor),JimakuOutlineWidth:Number(e.value.JimakuAttr.OutlineWidth),ActorTextColor:b(e.value.ActorNameAttr.TextColor),ActorOutlineColor:b(e.value.ActorNameAttr.OutlineColor),ActorOutlineWidth:Number(e.value.ActorNameAttr.OutlineWidth),ExtData:me(e.value.ExtData)}},Q=u(()=>i.value.Index!==-1),X=u(()=>`「${i.value.Body.Name}」`),Y=t=>{e.value=t},Z=()=>{e.value=he(),e.value.Enable=!0},I=()=>{e.value.Id=i.value.Body.Id,e.value.Name=i.value.Body.Name,e.value.Kana=i.value.Body.Kana,e.value.Engines=i.value.Body.Engines,e.value.PrimaryEngine=i.value.Body.PrimaryEngine,e.value.Aliases=i.value.Body.AnotherNames,e.value.AliasText=e.value.Aliases.join(`
`),k(e.value.JimakuAttr.TextColor,i.value.Body.JimakuTextColor),k(e.value.JimakuAttr.OutlineColor,i.value.Body.JimakuOutlineColor),e.value.JimakuAttr.OutlineWidth=i.value.Body.JimakuOutlineWidth,k(e.value.ActorNameAttr.TextColor,i.value.Body.ActorTextColor),k(e.value.ActorNameAttr.OutlineColor,i.value.Body.ActorOutlineColor),e.value.ActorNameAttr.OutlineWidth=i.value.Body.ActorOutlineWidth,e.value.ExtData=me(i.value.Body.ExtData),e.value.Enable=!0},ee=(t,a)=>{const p=me(e.value.ExtData);p[t]=a,e.value.ExtData=p},te=t=>{const a=e.value;a.ExtData=Be(a.ExtData,t),e.value=a},oe=()=>{e.value.Enable=!0},J=()=>{e.value.Enable=!1},D=u(()=>e.value.Enable),le=u(()=>e.value.Id===-1),ae=u(()=>e.value.Id!==-1),se=u(()=>e.value.Name),ne=u(()=>`「${e.value.Name}」`),ie=t=>t[0]=="#"?t:ge.dict[t].Hex,ce=t=>t[0]=="#"?"rgb":"named",re=(t,a)=>{t.Type=a},F=t=>t[0]=="#"?t:ge.dict[t].Hex,k=(t,a)=>{t.Type=ce(a),t.Name=a,t.Rgb=F(a)},b=t=>t.Type==="named"?t.Name:t.Rgb,de=(t,a)=>{t.Name=a,t.Rgb=F(t.Name)},ue=(t,a)=>{t.Rgb=a},$=(t,a)=>{a.Type=t.Type,a.Name=t.Name,a.Rgb=t.Rgb};return{specs:v,names:c,detail:i,edit:e,setSpecs:h,setNames:A,getNamesIndex:m,appendName:C,updateName:g,updateNameById:_,deleteName:y,deleteNameById:x,setDetail:q,resetDetail:M,applyDetailBody:G,applyDetailFromEdit:z,visibleDetail:Q,titleByDetail:X,setEdit:Y,newEdit:Z,applyEditFromDetail:I,addExtData:ee,removeExtData:te,editEnable:oe,editDisable:J,visibleEdit:D,isAdd:le,isUpdate:ae,modalInfoByEdit:se,titleByEdit:ne,strToColor:ie,selectChangedColor:de,selectRgb:ue,copyEditTextInfo:(t,a)=>{$(t.TextColor,a.TextColor),$(t.OutlineColor,a.OutlineColor),a.OutlineWidth=t.OutlineWidth},setColorType:re}}),Me={class:"row py-1"},Ge={class:"col"},He={key:0},Ce=L({__name:"ListDetailRow",props:{title:{type:String,required:!0},list:{type:Array,required:!0}},setup(v){const c=v,i=u(()=>c.list.length>0);return(e,h)=>(r(),d("div",Me,[n(Ne,{title:c.title},null,8,["title"]),o("div",Ge,[s(i)?T("",!0):(r(),d("span",He,"なし")),o("ul",null,[(r(!0),d(K,null,P(c.list,(A,m)=>(r(),d("li",{key:m},S(A),1))),128))])])]))}}),ze={class:"row py-1"},Qe={class:"col"},U=L({__name:"ColorAttrRow",props:{title:String,color:String},setup(v){const c=v,i=j();return(e,h)=>(r(),d("div",ze,[n(Ne,{title:c.title},null,8,["title"]),o("div",Qe,[o("span",{style:Ee({color:s(i).strToColor(c.color)})},"■",4),ke(" "+S(c.color),1)])]))}}),Xe={class:"row py-1"},Ye={class:"col"},Ze={class:"container"},et={class:"row"},tt={class:"col-auto align-self-center"},ot={class:"row"},lt={class:"col-auto align-self-center"},at={class:"input-group"},st=["id","value","checked"],nt=["for"],it={class:"col-auto align-self-center"},ct={class:"input-group"},rt=["value"],dt={class:"col align-self-center"},ut={class:"row"},mt={class:"col-auto align-self-center"},pt={class:"input-group"},vt=["id","value","checked"],_t=["for"],yt={class:"col align-self-center"},ht={class:"input-group"},At=["value"],W=L({__name:"InputColorRow",props:{title:{type:String,required:!0},name:{type:String,required:!0},modelValue:{type:Object,required:!0},updateNameFunc:{type:Function,required:!0},updateRgbFunc:{type:Function,required:!0},changeCheckFunc:{type:Function,required:!0}},setup(v){const c=v,i=j(),e=g=>g==="named",h=g=>g==="rgb",A=u(()=>i.names),m=u(()=>`input-radio-name-${c.name}`),C=u(()=>`input-radio-rgb-${c.name}`);return(g,_)=>(r(),d("div",Xe,[n(N,{title:c.title},null,8,["title"]),o("div",Ye,[o("form",null,[o("div",Ze,[o("div",et,[o("div",tt,[o("div",ot,[o("div",lt,[o("div",at,[o("input",{id:s(m),type:"radio",class:"form-check-input",name:"{{ props.name }}",value:c.modelValue.Type,checked:e(c.modelValue.Type),onChange:_[0]||(_[0]=y=>v.changeCheckFunc(y.target))},null,40,st),o("label",{class:"form-check-label",for:s(m)}," 名前",8,nt)])]),o("div",it,[o("div",ct,[o("select",{class:"form-select-sm",value:v.modelValue.Name,onChange:_[1]||(_[1]=y=>v.updateNameFunc(y.target))},[(r(!0),d(K,null,P(s(A),(y,x)=>(r(),d("option",{key:x},S(y),1))),128))],40,rt)])])])]),o("div",dt,[o("div",ut,[o("div",mt,[o("div",pt,[o("input",{id:s(C),type:"radio",class:"form-check-input",name:"{{ props.name }}",value:c.modelValue.Type,checked:h(c.modelValue.Type),onChange:_[2]||(_[2]=y=>v.changeCheckFunc(y.target))},null,40,vt),o("label",{class:"form-check-label",for:s(C)}," RGB",8,_t)])]),o("div",yt,[o("div",ht,[o("input",{type:"color",class:"form-control-sm form-control-color",value:c.modelValue.Rgb,onChange:_[3]||(_[3]=y=>v.updateRgbFunc(y.target))},null,40,At)])])])])])])])])]))}}),gt={class:"container main-view overflow-auto"},Ct={key:0,id:"loading",class:"d-flex align-items-center"},Nt=o("div",{class:"spinner",variant:"primary"},null,-1),$t=[Nt],ft={key:1,class:"container"},Et={key:1,class:"row py-1"},kt={class:"container"},bt={class:"row"},Tt={class:"col"},xt={class:"col"},Bt={class:"row py-1"},Ot={class:"col"},wt={class:"col"},St={class:"row py-1"},It={class:"col"},Jt={class:"row"},Dt={class:"input-group"},Ft=["id","value"],Rt=["for"],Vt={class:"row py-1"},Ut={class:"col"},Wt={class:"row"},Kt={class:"input-group"},Pt=["id","value"],Lt=["for"],jt={class:"row py-1"},qt={class:"col"},Mt=o("ul",null,[o("li",null,"別名を1行ずつ記載"),o("li",null,'特定のエンジン名は後ろに"[エンジン名]"を入れる'),o("li",null,"空行・空白のみの行は無視"),o("li",null,"行の両端の空白は無視")],-1),Gt={class:"row py-1"},Ht={class:"col"},zt={class:"row py-1"},Qt=o("div",{class:"col-4"}," ",-1),Xt={class:"col-1"},Yt=o("i",{class:"bi-arrow-down-circle"},null,-1),Zt=[Yt],eo=o("div",{class:"col-1"}," ",-1),to={class:"col-1"},oo=o("i",{class:"bi-arrow-up-circle"},null,-1),lo=[oo],ao=o("div",{class:"col"}," ",-1),so={class:"row py-1"},no={class:"col"},io={class:"row py-1"},co={key:2,class:"row py-1"},ro={key:0,class:"row"},uo={class:"col-auto"},mo={class:"col"},po={class:"row detail-box"},vo={key:0,class:"col"},_o=o("p",null,"声優を選択してください",-1),yo=[_o],ho={key:1,class:"col"},Ao={class:"row"},go={class:"col"},Co={class:"row"},No={class:"col"},To=L({__name:"ActorMasterView",setup(v){const c=Re(),i=Ve(),e=qe(),h=Oe(),A=j(),m=Ue(),C=w(!1),g=l=>{c.clear(),i.clear();const t=`${m.apiBaseURL}/api/v1/ActorSpec/${l}/`;V(t,null,"声優詳細取得エラー",a=>{e.setDetail(l,a.data.Spec)})},_=()=>{e.editDisable(),e.resetDetail()},y=()=>{e.newEdit()},x=(l,t)=>{e.addExtData(l,t)},q=l=>{e.removeExtData(l)},M=()=>{e.applyDetailFromEdit();const l=e.titleByEdit,t=`${m.apiBaseURL}/api/v1/ActorSpec/`;We(t,e.detail.Body,`${l}の追加に成功しました`,`${l}の追加エラー`,a=>{console.log(`returns ${a.status}`),e.appendName({Id:a.data.NewId,Name:e.detail.Body.Name}),_()})},G=()=>{e.applyDetailFromEdit();const l=e.detail.Body.Id,t=e.detail.Body.Name,a=e.titleByEdit,p=`${m.apiBaseURL}/api/v1/ActorSpec/${l}`;Ke(p,e.detail.Body,`${a}の更新に成功しました`,`${a}の更新エラー`,f=>{console.log(`returns ${f.status}`),e.updateNameById(l,{Id:l,Name:t}),_()})},H=()=>{const l=e.detail.Body.Id,t=e.titleByEdit,a=`${m.apiBaseURL}/api/v1/ActorSpec/${l}`;Pe(a,`${t}の削除に成功しました`,`${t}の削除エラー`,p=>{console.log(`returns ${p.status}`),e.deleteNameById(l),_()})},z=()=>{e.applyEditFromDetail(),e.editEnable()},Q=()=>{e.editDisable()},X=u(()=>e.visibleEdit),Y=u(()=>e.visibleDetail),Z=u(()=>e.isAdd),I=u(()=>e.isUpdate),ee=u(()=>`${e.titleByEdit} を追加します。よろしいですか？`),te=u(()=>`${e.titleByDetail} を更新します。よろしいですか？`),oe=u(()=>`${e.titleByDetail} を削除します。よろしいですか？`),J=l=>`ve_${l}`,D=l=>`pve_${l}`,le=l=>{console.log(`[JT:colorName]${l.value}`),e.selectChangedColor(e.edit.JimakuAttr.TextColor,l.value)},ae=l=>{console.log(`[JT:rgb]${l.value}`),e.selectRgb(e.edit.JimakuAttr.TextColor,l.value)},se=l=>{console.log(`[JO:colorName]${l.value}`),e.selectChangedColor(e.edit.JimakuAttr.OutlineColor,l.value)},ne=l=>{console.log(`[JO:rgb]${l.value}`),console.log(l.value),e.selectRgb(e.edit.JimakuAttr.OutlineColor,l.value)},ie=l=>{console.log(`[AT:colorName]${l.value}`),e.selectChangedColor(e.edit.ActorNameAttr.TextColor,l.value)},ce=l=>{console.log(`[AT:rgb]${l.value}`),e.selectRgb(e.edit.ActorNameAttr.TextColor,l.value)},re=l=>{console.log(`[AO:colorName]${l.value}`),e.selectChangedColor(e.edit.ActorNameAttr.OutlineColor,l.value)},F=l=>{console.log(`[AO:rgb]${l.value}`),e.selectRgb(e.edit.ActorNameAttr.OutlineColor,l.value)},k=l=>{const t=$(l.value);console.log(`[JT:colorType]${l.value}->${t}`),e.setColorType(e.edit.JimakuAttr.TextColor,t)},b=l=>{const t=$(l.value);console.log(`[JO:colorType]${l.value}->${t}`),e.setColorType(e.edit.JimakuAttr.OutlineColor,t)},de=l=>{const t=$(l.value);console.log(`[AT:colorType]${l.value}->${t}`),e.setColorType(e.edit.ActorNameAttr.TextColor,t)},ue=l=>{const t=$(l.value);console.log(`[AO:colorType]${l.value}->${t}`),e.setColorType(e.edit.ActorNameAttr.OutlineColor,t)},$=l=>l==="named"?"rgb":"named";return be(()=>{C.value=!1;const l=`${m.apiBaseURL}/api/v1/ActorSpec/Index/`;V(l,null,"声優名一覧取得エラー",t=>{e.setNames(t.data.Names);const a=`${m.apiBaseURL}/api/v1/VoiceEngineSpec/`;V(a,null,"音声合成エンジン名一覧取得エラー",p=>{h.setSpecs(p.data.Specs);const f=`${m.apiBaseURL}/api/v1/ColorSpec/All/`;V(f,null,"色情報取得エラー",$e=>{A.setSpecs($e.data.Specs),A.setColorNames(),A.setNameToColor(),C.value=!0})})})}),(l,t)=>(r(),d("div",gt,[n(Le),C.value?(r(),d("div",ft,[s(e).visibleEdit?T("",!0):(r(),R(Fe,{key:0,showFunc:y})),s(e).visibleEdit?(r(),d("div",Et,[o("div",kt,[o("div",bt,[n(N,{title:"名前"}),o("div",Tt,[o("div",xt,[E(o("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s(e).edit.Name=a),class:"form-control-sm",placeholder:"名前"},null,512),[[B,s(e).edit.Name]])])])]),o("div",Bt,[n(N,{title:"かな"}),o("div",Ot,[o("div",wt,[E(o("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s(e).edit.Kana=a),class:"form-control-sm",placeholder:"かな"},null,512),[[B,s(e).edit.Kana]])])])]),o("div",St,[n(N,{title:"対応音声合成エンジン"}),o("div",It,[o("div",Jt,[(r(!0),d(K,null,P(s(h).options,(a,p)=>(r(),d("div",{key:p,class:"col-auto"},[o("div",Dt,[E(o("input",{id:J(p),type:"checkbox",class:"form-check-input",value:a,"onUpdate:modelValue":t[2]||(t[2]=f=>s(e).edit.Engines=f)},null,8,Ft),[[Te,s(e).edit.Engines]]),o("label",{class:"form-check-label",for:J(p)}," "+S(a),9,Rt)])]))),128))])])]),o("div",Vt,[n(N,{title:"優先音声合成エンジン"}),o("div",Ut,[o("div",Wt,[(r(!0),d(K,null,P(s(h).options,(a,p)=>(r(),d("div",{key:p,class:"col-auto"},[o("div",Kt,[E(o("input",{id:D(p),type:"radio",class:"form-check-input",value:a,"onUpdate:modelValue":t[3]||(t[3]=f=>s(e).edit.PrimaryEngine=f)},null,8,Pt),[[xe,s(e).edit.PrimaryEngine]]),o("label",{class:"form-check-label",for:D(p)}," "+S(a),9,Lt)])]))),128))])])]),o("div",jt,[n(N,{title:"別名"}),o("div",qt,[E(o("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>s(e).edit.AliasText=a),class:"form-control-sm",id:"actorEditAliases"},null,512),[[B,s(e).edit.AliasText]]),Mt])]),n(W,{title:"字幕文字色",modelValue:s(e).edit.JimakuAttr.TextColor,name:"jimaku-text-color-type",updateNameFunc:le,updateRgbFunc:ae,changeCheckFunc:k},null,8,["modelValue"]),n(W,{title:"字幕枠色",modelValue:s(e).edit.JimakuAttr.OutlineColor,name:"jimaku-outline-color-type",updateNameFunc:se,updateRgbFunc:ne,changeCheckFunc:b},null,8,["modelValue"]),o("div",Gt,[n(N,{title:"字幕枠幅"}),o("div",Ht,[E(o("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>s(e).edit.JimakuAttr.OutlineWidth=a),type:"number",class:"form-control-sm",placeholder:"字幕枠幅"},null,512),[[B,s(e).edit.JimakuAttr.OutlineWidth]])])]),o("div",zt,[Qt,o("div",Xt,[o("button",{onClick:t[6]||(t[6]=a=>s(e).copyEditTextInfo(s(e).edit.JimakuAttr,s(e).edit.ActorNameAttr)),type:"button",class:"btn btn-info"},Zt)]),eo,o("div",to,[o("button",{onClick:t[7]||(t[7]=a=>s(e).copyEditTextInfo(s(e).edit.ActorNameAttr,s(e).edit.JimakuAttr)),type:"button",class:"btn btn-info"},lo)]),ao]),n(W,{title:"声優名文字色",modelValue:s(e).edit.ActorNameAttr.TextColor,name:"actor-name-text-color-type",updateNameFunc:ie,updateRgbFunc:ce,changeCheckFunc:de},null,8,["modelValue"]),n(W,{title:"声優名枠色",modelValue:s(e).edit.ActorNameAttr.OutlineColor,name:"actor-name-outline-color-type",updateNameFunc:re,updateRgbFunc:F,changeCheckFunc:ue},null,8,["modelValue"]),o("div",so,[n(N,{title:"声優名枠幅"}),o("div",no,[E(o("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>s(e).edit.ActorNameAttr.OutlineWidth=a),type:"number",class:"form-control-sm",placeholder:"声優名枠幅"},null,512),[[B,s(e).edit.ActorNameAttr.OutlineWidth]])])]),n(we,{ext:s(e).edit.ExtData,addFunc:x,removeFunc:q},null,8,["ext"]),o("div",io,[s(Z)?(r(),R(ve,{key:0,id:"confirm-add-actor",title:"登録",variant:"danger"})):T("",!0),s(I)?(r(),R(ve,{key:1,id:"confirm-update-actor",title:"追加",variant:"warning"})):T("",!0),s(I)?(r(),R(ve,{key:2,id:"confirm-update-actor",title:"更新",variant:"danger"})):T("",!0),n(Je,{cancelFunc:Q})])])])):(r(),d("div",co,[s(X)?T("",!0):(r(),d("div",ro,[o("div",uo,[n(Se,{names:s(e).names,showFunc:g},null,8,["names"])]),o("div",mo,[o("div",po,[s(Y)?(r(),d("div",ho,[o("div",Ao,[o("div",go,[n(O,{title:"名前",value:s(e).detail.Body.Name},null,8,["value"]),n(O,{title:"かな",value:s(e).detail.Body.Kana},null,8,["value"]),n(Ce,{title:"対応音声合成エンジン",list:s(e).detail.Body.Engines},null,8,["list"]),n(O,{title:"優先音声合成エンジン",value:s(e).detail.Body.PrimaryEngine},null,8,["value"]),n(Ce,{title:"別名",list:s(e).detail.Body.AnotherNames},null,8,["list"]),n(U,{title:"字幕文字色",color:s(e).detail.Body.JimakuTextColor},null,8,["color"]),n(U,{title:"字幕枠色",color:s(e).detail.Body.JimakuOutlineColor},null,8,["color"]),n(O,{title:"字幕枠幅",value:s(e).detail.Body.JimakuOutlineWidth.toString()},null,8,["value"]),n(U,{title:"声優名文字色",color:s(e).detail.Body.ActorTextColor},null,8,["color"]),n(U,{title:"声優名枠色",color:s(e).detail.Body.ActorOutlineColor},null,8,["color"]),n(O,{title:"声優名枠幅",value:s(e).detail.Body.ActorOutlineWidth.toString()},null,8,["value"]),n(Ie,{ext:s(e).detail.Body.ExtData},null,8,["ext"])])]),o("div",Co,[o("div",No,[n(De,{editFunc:z,deleteModalId:"confirm-delete-actor"})])])])):(r(),d("div",vo,yo))])])]))]))])):(r(),d("div",Ct,$t)),n(pe,{id:"confirm-add-actor",title:"声優情報追加の確認",notice:s(ee),okFunc:M},null,8,["notice"]),n(pe,{id:"confirm-update-actor",title:"声優情報更新の確認",notice:s(te),okFunc:G},null,8,["notice"]),n(pe,{id:"confirm-delete-actor",title:"声優情報削除の確認",notice:s(oe),okFunc:H},null,8,["notice"])]))}});export{To as default};
