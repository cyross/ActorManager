import{b as Et,r as T,e as v,d as U,c as p,a as s,f as o,u as a,g as E,F as pt,h as vt,o as u,t as W,n as xt,i as V,j as kt,k as B,w as f,v as $,E as y,l as bt}from"./index-f7d3ca82.js";import{u as K}from"./colors-b738e8fc.js";import{c as dt,f as ft,_ as Nt,a as x,u as Bt,b as $t,d as Tt,e as F,g as Ot,h as St,i as Dt,j as wt}from"./NameButtonList.vue_vue_type_script_setup_true_lang-d276276c.js";import{a as Ft,b as It,u as Rt,c as I,d as Jt,e as Vt,f as Ut,_ as Wt}from"./AlertsComponent.vue_vue_type_script_setup_true_lang-d7b22ebd.js";import{a as ut,_ as mt}from"./DialogShowButtonCol.vue_vue_type_script_setup_true_lang-263e6ebe.js";const _t=()=>({TextColor:At(),OutlineColor:At(),OutlineWidth:0}),At=()=>({Type:"named",Name:"Black",Rgb:"#000000"}),ht=()=>({Enable:!1,Id:-1,Name:"",Kana:"",Engines:[],Aliases:[],AliasText:"",JimakuAttr:_t(),ActorNameAttr:_t(),ExtData:{}}),Kt=()=>({Id:-1,Name:"",Kana:"",Engines:[],AnotherNames:[],JimakuTextColor:"",JimakuOutlineColor:"",JimakuOutlineWidth:0,ActorTextColor:"",ActorOutlineColor:"",ActorOutlineWidth:0,ExtData:{}}),yt=()=>({Index:-1,Body:Kt()}),gt=K(),Lt=Et("actor",()=>{const _=T([]),d=T([]),c=T(yt()),t=T(ht()),C=e=>{_.value=e},g=e=>{d.value=e},m=e=>d.value.findIndex(n=>n.Id===e),A=e=>{d.value.push(e)},h=(e,n)=>{d.value[e].Id=n.Id,d.value[e].Name=n.Name},N=(e,n)=>{h(m(e),n)},O=e=>{d.value.splice(e,1)},L=e=>{O(m(e))},j=(e,n)=>{c.value={Index:e,Body:n}},q=()=>{c.value=yt()},M=e=>{c.value.Body=e},G=()=>t.value.AliasText.split(`
`).map(e=>e.trim()).filter(e=>e.length!=0),H=()=>{c.value.Body={Id:t.value.Id,Name:t.value.Name,Kana:t.value.Kana,Engines:t.value.Engines,AnotherNames:G(),JimakuTextColor:b(t.value.JimakuAttr.TextColor),JimakuOutlineColor:b(t.value.JimakuAttr.OutlineColor),JimakuOutlineWidth:Number(t.value.JimakuAttr.OutlineWidth),ActorTextColor:b(t.value.ActorNameAttr.TextColor),ActorOutlineColor:b(t.value.ActorNameAttr.OutlineColor),ActorOutlineWidth:Number(t.value.ActorNameAttr.OutlineWidth),ExtData:dt(t.value.ExtData)}},P=v(()=>c.value.Index!==-1),z=v(()=>`「${c.value.Body.Name}」`),Q=e=>{t.value=e},X=()=>{t.value=ht(),t.value.Enable=!0},S=()=>{t.value.Id=c.value.Body.Id,t.value.Name=c.value.Body.Name,t.value.Kana=c.value.Body.Kana,t.value.Engines=c.value.Body.Engines,t.value.Aliases=c.value.Body.AnotherNames,t.value.AliasText=t.value.Aliases.join(`
`),k(t.value.JimakuAttr.TextColor,c.value.Body.JimakuTextColor),k(t.value.JimakuAttr.OutlineColor,c.value.Body.JimakuOutlineColor),t.value.JimakuAttr.OutlineWidth=c.value.Body.JimakuOutlineWidth,k(t.value.ActorNameAttr.TextColor,c.value.Body.ActorTextColor),k(t.value.ActorNameAttr.OutlineColor,c.value.Body.ActorOutlineColor),t.value.ActorNameAttr.OutlineWidth=c.value.Body.ActorOutlineWidth,t.value.ExtData=dt(c.value.Body.ExtData),t.value.Enable=!0},Y=(e,n)=>{const w=dt(t.value.ExtData);w[e]=n,t.value.ExtData=w},Z=e=>{const n=t.value;n.ExtData=ft(n.ExtData,e),t.value=n},tt=()=>{t.value.Enable=!0},et=()=>{t.value.Enable=!1},ot=v(()=>t.value.Enable),lt=v(()=>t.value.Id===-1),at=v(()=>t.value.Id!==-1),st=v(()=>t.value.Name),nt=v(()=>`「${t.value.Name}」`),it=e=>e[0]=="#"?e:gt.dict[e].Hex,ct=e=>e[0]=="#"?"rgb":"named",D=e=>e[0]=="#"?e:gt.dict[e].Hex,k=(e,n)=>{e.Type=ct(n),e.Name=n,e.Rgb=D(n)},b=e=>e.Type==="named"?e.Name:e.Rgb,rt=(e,n)=>{e.Name=n,e.Rgb=D(e.Name)},l=(e,n)=>{e.Rgb=n},i=(e,n)=>{n.Type=e.Type,n.Name=e.Name,n.Rgb=e.Rgb};return{specs:_,names:d,detail:c,edit:t,setSpecs:C,setNames:g,getNamesIndex:m,appendName:A,updateName:h,updateNameById:N,deleteName:O,deleteNameById:L,setDetail:j,resetDetail:q,applyDetailBody:M,applyDetailFromEdit:H,visibleDetail:P,titleByDetail:z,setEdit:Q,newEdit:X,applyEditFromDetail:S,addExtData:Y,removeExtData:Z,editEnable:tt,editDisable:et,visibleEdit:ot,isAdd:lt,isUpdate:at,modalInfoByEdit:st,titleByEdit:nt,strToColor:it,selectChangedColor:rt,selectRgb:l,copyEditTextInfo:(e,n)=>{i(e.TextColor,n.TextColor),i(e.OutlineColor,n.OutlineColor),n.OutlineWidth=e.OutlineWidth}}}),jt={class:"row"},qt={class:"col"},Mt={key:0},Ct=U({__name:"ListDetailRow",props:{title:{type:String,required:!0},list:{type:Array,required:!0}},setup(_){const d=_,c=v(()=>d.list.length>0);return(t,C)=>(u(),p("div",jt,[s(Nt,{title:d.title},null,8,["title"]),o("div",qt,[a(c)?E("",!0):(u(),p("span",Mt,"なし")),o("ul",null,[(u(!0),p(pt,null,vt(d.list,(g,m)=>(u(),p("li",{key:m},W(g),1))),128))])])]))}}),Gt={class:"row"},Ht={class:"col"},R=U({__name:"ColorAttrRow",props:{title:String,color:String},setup(_){const d=_,c=K();return(t,C)=>(u(),p("div",Gt,[s(Nt,{title:d.title},null,8,["title"]),o("div",Ht,[o("span",{style:xt({color:a(c).strToColor(d.color)})},"■",4),V(" "+W(d.color),1)])]))}}),Pt={class:"row"},zt={class:"col-4"},Qt={class:"input-group"},Xt={class:"container"},Yt={class:"row"},Zt={class:"col-3"},te=["value","checked"],ee={class:"col"},oe=["value"],le={class:"row"},ae={class:"col-3"},se=["value","checked"],ne={class:"col"},ie=["value"],J=U({__name:"InputColorRow",props:{title:{type:String,required:!0},name:{type:String,required:!0},modelValue:{type:Object,required:!0},updateNameFunc:{type:Function,required:!0},updateRgbFunc:{type:Function,required:!0},changeCheckFunc:{type:Function,required:!0}},setup(_){const d=_,c=K(),t=m=>m==="named",C=m=>m==="rgb",g=v(()=>c.names);return(m,A)=>(u(),p("div",Pt,[s(x,{title:d.title},null,8,["title"]),o("div",zt,[o("form",null,[o("div",Qt,[o("div",Xt,[o("div",Yt,[o("div",Zt,[o("input",{type:"radio",name:"{{ props.name }}",value:d.modelValue.Type,checked:t(d.modelValue.Type),onChange:A[0]||(A[0]=h=>_.changeCheckFunc(h.target))},null,40,te),V(" 名前 ")]),o("div",ee,[o("select",{value:_.modelValue.Name,onChange:A[1]||(A[1]=h=>_.updateNameFunc(h.target))},[(u(!0),p(pt,null,vt(a(g),(h,N)=>(u(),p("option",{key:N},W(h),1))),128))],40,oe)])]),o("div",le,[o("div",ae,[o("input",{type:"radio",name:"{{ props.name }}",value:d.modelValue.Type,checked:C(d.modelValue.Type),onChange:A[2]||(A[2]=h=>_.changeCheckFunc(h.target))},null,40,se),V(" RGB ")]),o("div",ne,[o("input",{type:"color",class:"form-control form-control-color",value:d.modelValue.Rgb,onChange:A[3]||(A[3]=h=>_.updateRgbFunc(h.target))},null,40,ie)])])])])])])]))}}),ce={class:"container main-view"},re={key:0,id:"loading",class:"d-flex align-items-center"},de=o("div",{class:"spinner",variant:"primary"},null,-1),ue=[de],me={key:1,class:"container"},pe={key:2,class:"row"},ve={class:"container"},_e={class:"row"},Ae={class:"col"},he={class:"col"},ye={class:"row"},ge={class:"col"},Ce={class:"col"},Ne={class:"row"},Ee={class:"col"},xe=["id","value"],ke={class:"row"},be={class:"col"},fe=o("ul",null,[o("li",null,"別名を1行ずつ記載"),o("li",null,'特定のエンジン名は後ろに"[エンジン名]"を入れる'),o("li",null,"空行・空白のみの行は無視"),o("li",null,"行の両端の空白は無視")],-1),Be={class:"row"},$e={class:"col"},Te={class:"col"},Oe={class:"row"},Se=o("div",{class:"col-4"}," ",-1),De={class:"col-1"},we=o("i",{class:"bi-arrow-down-circle"},null,-1),Fe=[we],Ie=o("div",{class:"col-1"}," ",-1),Re={class:"col-1"},Je=o("i",{class:"bi-arrow-up-circle"},null,-1),Ve=[Je],Ue=o("div",{class:"col"}," ",-1),We={class:"row"},Ke={class:"col"},Le={class:"col"},je={class:"row"},qe={key:3,class:"row"},Me={key:0,class:"row"},Ge={class:"col-4 full_height"},He={class:"col"},Pe={class:"container"},ze={class:"row half_height"},Qe={key:0,class:"d-flex detail_box"},Xe=o("p",null,"選択がされていません",-1),Ye=[Xe],Ze={key:1,class:"d-flex detail_box"},to={class:"container"},no=U({__name:"ActorMasterView",setup(_){const d=Ft(),c=It(),t=Lt(),C=Bt(),g=K(),m=Rt(),A=T(!1),h=l=>{d.clear(),c.clear();const i=`${m.apiBaseURL}/api/v1/ActorSpec/${l}/`;I(i,null,"声優詳細取得エラー",r=>{t.setDetail(l,r.data.Spec)})},N=()=>{t.editDisable(),t.resetDetail()},O=()=>{t.newEdit()},L=(l,i)=>{t.addExtData(l,i)},j=l=>{t.removeExtData(l)},q=()=>{t.applyDetailFromEdit();const l=t.titleByEdit,i=`${m.apiBaseURL}/api/v1/ActorSpec/`;Jt(i,t.detail.Body,`${l}の追加に成功しました`,`${l}の追加エラー`,r=>{console.log(`returns ${r.status}`),t.appendName({Id:r.data.NewId,Name:t.detail.Body.Name}),N()})},M=()=>{t.applyDetailFromEdit();const l=t.detail.Body.Id,i=t.detail.Body.Name,r=t.titleByEdit,e=`${m.apiBaseURL}/api/v1/ActorSpec/${l}`;Vt(e,t.detail.Body,`${r}の更新に成功しました`,`${r}の更新エラー`,n=>{console.log(`returns ${n.status}`),t.updateNameById(l,{Id:l,Name:i}),N()})},G=()=>{const l=t.detail.Body.Id,i=t.titleByEdit,r=`${m.apiBaseURL}/api/v1/ActorSpec/${l}`;Ut(r,`${i}の削除に成功しました`,`${i}の削除エラー`,e=>{console.log(`returns ${e.status}`),t.deleteNameById(l),N()})},H=()=>{t.applyEditFromDetail(),t.editEnable()},P=()=>{t.editDisable()},z=v(()=>t.visibleEdit),Q=v(()=>t.visibleDetail),X=v(()=>t.isAdd),S=v(()=>t.isUpdate),Y=v(()=>`${t.titleByEdit} を追加します。よろしいですか？`),Z=v(()=>`${t.titleByDetail} を更新します。よろしいですか？`),tt=v(()=>`${t.titleByDetail} を削除します。よろしいですか？`),et=l=>{console.log(l.value),t.selectChangedColor(t.edit.JimakuAttr.TextColor,l.value)},ot=l=>{console.log(l.value),t.selectRgb(t.edit.JimakuAttr.TextColor,l.value)},lt=l=>{console.log(l.value),t.selectChangedColor(t.edit.JimakuAttr.OutlineColor,l.value)},at=l=>{console.log(l.value),t.selectRgb(t.edit.JimakuAttr.OutlineColor,l.value)},st=l=>{console.log(l.value),t.selectChangedColor(t.edit.ActorNameAttr.TextColor,l.value)},nt=l=>{console.log(l.value),t.selectRgb(t.edit.ActorNameAttr.TextColor,l.value)},it=l=>{console.log(l.value),t.selectChangedColor(t.edit.ActorNameAttr.OutlineColor,l.value)},ct=l=>{console.log(l.value),t.selectRgb(t.edit.ActorNameAttr.OutlineColor,l.value)},D=l=>{console.log(l.value)},k=l=>{console.log(l.value)},b=l=>{console.log(l.value)},rt=l=>{console.log(l.value)};return kt(()=>{A.value=!1;const l=`${m.apiBaseURL}/api/v1/ActorSpec/Index/`;I(l,null,"声優名一覧取得エラー",i=>{t.setNames(i.data.Names);const r=`${m.apiBaseURL}/api/v1/VoiceEngineSpec/`;I(r,null,"音声合成エンジン名一覧取得エラー",e=>{C.setSpecs(e.data.Specs);const n=`${m.apiBaseURL}/api/v1/ColorSpec/All/`;I(n,null,"色情報取得エラー",w=>{g.setSpecs(w.data.Specs),g.setColorNames(),g.setNameToColor(),A.value=!0})})})}),(l,i)=>(u(),p("div",ce,[s(Wt),A.value?(u(),p("div",me,[a(t).visibleEdit?E("",!0):(u(),B(wt,{key:0,showFunc:O})),a(t).visibleEdit?E("",!0):(u(),B(y,{key:1})),a(t).visibleEdit?(u(),p("div",pe,[o("div",ve,[o("div",_e,[s(x,{title:"名前"}),o("div",Ae,[o("div",he,[f(o("input",{"onUpdate:modelValue":i[0]||(i[0]=r=>a(t).edit.Name=r),class:"form-control",placeholder:"名前"},null,512),[[$,a(t).edit.Name]])])])]),s(y),o("div",ye,[s(x,{title:"かな"}),o("div",ge,[o("div",Ce,[f(o("input",{"onUpdate:modelValue":i[1]||(i[1]=r=>a(t).edit.Kana=r),class:"form-control",placeholder:"かな"},null,512),[[$,a(t).edit.Kana]])])])]),s(y),o("div",Ne,[s(x,{title:"対応音声合成エンジン"}),o("div",Ee,[(u(!0),p(pt,null,vt(a(C).options,(r,e)=>(u(),p("div",{key:e,class:"input-group"},[f(o("input",{id:"ve_"+e,type:"checkbox",value:r,"onUpdate:modelValue":i[2]||(i[2]=n=>a(t).edit.Engines=n)},null,8,xe),[[bt,a(t).edit.Engines]]),V("  "+W(r),1)]))),128))])]),s(y),o("div",ke,[s(x,{title:"別名"}),o("div",be,[f(o("textarea",{"onUpdate:modelValue":i[3]||(i[3]=r=>a(t).edit.AliasText=r),class:"form-control",id:"actorEditAliases"},null,512),[[$,a(t).edit.AliasText]]),fe])]),s(y),s(J,{title:"字幕文字色",modelValue:a(t).edit.JimakuAttr.TextColor,name:"jimaku-text-color-type",updateNameFunc:et,updateRgbFunc:ot,changeCheckFunc:D},null,8,["modelValue"]),s(y),s(J,{title:"字幕枠色",modelValue:a(t).edit.JimakuAttr.OutlineColor,name:"jimaku-outline-color-type",updateNameFunc:lt,updateRgbFunc:at,changeCheckFunc:k},null,8,["modelValue"]),s(y),o("div",Be,[s(x,{title:"字幕枠幅"}),o("div",$e,[o("div",Te,[f(o("input",{"onUpdate:modelValue":i[4]||(i[4]=r=>a(t).edit.JimakuAttr.OutlineWidth=r),type:"number",class:"form-control",placeholder:"字幕枠幅"},null,512),[[$,a(t).edit.JimakuAttr.OutlineWidth]])])])]),s(y),o("div",Oe,[Se,o("div",De,[o("button",{onClick:i[5]||(i[5]=r=>a(t).copyEditTextInfo(a(t).edit.JimakuAttr,a(t).edit.ActorNameAttr)),type:"button",class:"btn btn-info"},Fe)]),Ie,o("div",Re,[o("button",{onClick:i[6]||(i[6]=r=>a(t).copyEditTextInfo(a(t).edit.ActorNameAttr,a(t).edit.JimakuAttr)),type:"button",class:"btn btn-info"},Ve)]),Ue]),s(y),s(J,{title:"声優名文字色",modelValue:a(t).edit.ActorNameAttr.TextColor,name:"actor-name-text-color-type",updateNameFunc:st,updateRgbFunc:nt,changeCheckFunc:b},null,8,["modelValue"]),s(y),s(J,{title:"声優名枠色",modelValue:a(t).edit.ActorNameAttr.OutlineColor,name:"actor-name-outline-color-type",updateNameFunc:it,updateRgbFunc:ct,changeCheckFunc:rt},null,8,["modelValue"]),s(y),o("div",We,[s(x,{title:"声優名枠幅"}),o("div",Ke,[o("div",Le,[f(o("input",{"onUpdate:modelValue":i[7]||(i[7]=r=>a(t).edit.ActorNameAttr.OutlineWidth=r),type:"number",class:"form-control",placeholder:"声優名枠幅"},null,512),[[$,a(t).edit.ActorNameAttr.OutlineWidth]])])])]),s(y),s($t,{ext:a(t).edit.ExtData,addFunc:L,removeFunc:j},null,8,["ext"]),s(y),o("div",je,[a(X)?(u(),B(mt,{key:0,id:"confirm-add-actor",title:"登録",variant:"danger"})):E("",!0),a(S)?(u(),B(mt,{key:1,id:"confirm-update-actor",title:"追加",variant:"warning"})):E("",!0),a(S)?(u(),B(mt,{key:2,id:"confirm-update-actor",title:"更新",variant:"danger"})):E("",!0),s(St,{cancelFunc:P})])])])):(u(),p("div",qe,[a(z)?E("",!0):(u(),p("div",Me,[o("div",Ge,[s(Tt,{names:a(t).names,showFunc:h},null,8,["names"])]),o("div",He,[o("div",Pe,[o("div",ze,[a(Q)?(u(),p("div",Ze,[o("div",to,[s(F,{title:"名前",value:a(t).detail.Body.Name},null,8,["value"]),s(F,{title:"かな",value:a(t).detail.Body.Kana},null,8,["value"]),s(Ct,{title:"対応音声合成エンジン",list:a(t).detail.Body.Engines},null,8,["list"]),s(Ct,{title:"別名",list:a(t).detail.Body.AnotherNames},null,8,["list"]),s(R,{title:"字幕文字色",color:a(t).detail.Body.JimakuTextColor},null,8,["color"]),s(R,{title:"字幕枠色",color:a(t).detail.Body.JimakuOutlineColor},null,8,["color"]),s(F,{title:"字幕枠幅",value:a(t).detail.Body.JimakuOutlineWidth.toString()},null,8,["value"]),s(R,{title:"声優名文字色",color:a(t).detail.Body.ActorTextColor},null,8,["color"]),s(R,{title:"声優名枠色",color:a(t).detail.Body.ActorOutlineColor},null,8,["color"]),s(F,{title:"声優名枠幅",value:a(t).detail.Body.ActorOutlineWidth.toString()},null,8,["value"]),s(Ot,{ext:a(t).detail.Body.ExtData},null,8,["ext"]),s(Dt,{editFunc:H,deleteModalId:"confirm-delete-actor"})])])):(u(),p("div",Qe,Ye))])])])]))]))])):(u(),p("div",re,ue)),s(ut,{id:"confirm-add-actor",title:"声優情報追加の確認",notice:a(Y),okFunc:q},null,8,["notice"]),s(ut,{id:"confirm-update-actor",title:"声優情報更新の確認",notice:a(Z),okFunc:M},null,8,["notice"]),s(ut,{id:"confirm-delete-actor",title:"声優情報削除の確認",notice:a(tt),okFunc:G},null,8,["notice"])]))}});export{no as default};
